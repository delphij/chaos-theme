{{- /*
Integrates Remark42 comment system if enabled in site configuration.

Requires site.Params.remarkURL to be set. Optional parameters:
- remarkSiteId (default: "remark")
- remarkLocale (default: "zh")
- remarkNoFooter (default: "true")

@context {page} page The current page context.

@example: {{ partial "remark.html" . }}
*/}}

{{- with site.Params.remarkURL }}
{{- $siteId := site.Params.remarkSiteId | default "remark" }}
{{- $locale := site.Params.remarkLocale | default "zh" }}
{{- $noFooter := site.Params.remarkNoFooter | default "true" }}
<script>var remark_config = { host: '{{ . }}', site_id: '{{ $siteId }}', locale: '{{ $locale }}', no_footer: '{{ $noFooter }}' };</script>
<script>!function(e,n){for(var o=0;o<e.length;o++){var r=n.createElement("script"),c=".js",d=n.head||n.body;"noModule"in r?(r.type="module",c=".mjs"):r.async=!0,r.defer=!0,r.src=remark_config.host+"/web/"+e[o]+c,d.appendChild(r)}}(remark_config.components||["embed"],document);</script>
<div id="remark42"></div>
{{- end }}
